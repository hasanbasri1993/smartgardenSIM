#include <SoftwareSerial.h>
SoftwareSerial SIM800L(2, 3); // RX | TX
// Connect the SIM800L TX to Arduino pin 2 RX.
// Connect the SIM800L RX to Arduino pin 3 TX.


#define IP "184.106.153.149" // ThingSpeak IP Address: 184.106.153.149

// GET /update?key=[THINGSPEAK_KEY]&field1=[data 1]&field2=[data 2]...;
String GET = "GET /update?key=22TIOV8LXVYMAKX6";
void setup() {
  // start th serial communication with the host computer
  Serial.begin(9600);
  while (!Serial);
  Serial.println("Arduino with SIM800L is ready");

  // start communication with the SIM800L in 9600
  SIM800L.begin(9600);
  Serial.println("SIM800L started at 9600");
  delay(1000);
  Serial.println("Setup Complete! SIM800L is Ready!");

  Serial.println("Set To GPRS");
  SIM800L.write("AT+SAPBR=3,1,\"Contype\",\"GPRS\"\r\n");
  delay(1000);

  Serial.println("Set To APN");
  SIM800L.write("AT+SAPBR=3,1,\"APN\",\"internet\"\r\n");
  delay(1000);

  Serial.println("Set To AI");
  SIM800L.write("AT+SAPBR=1,1\r\n");
  delay(1000);

  Serial.println("Set To GET IP");
  SIM800L.write("AT+SAPBR=2,1\r\n");
  delay(1000);

  Serial.println("Set To APN");
  SIM800L.write("AT+SAPBR=3,1,\"TCP\",\"184.106.153.149\",80\r\n");
  delay(1000);

  Serial.println("Mengirim Char Ctrl+Z / ESC untuk keluar dari menu SMS");
  SIM800L.write((char)26);
  delay(1000);

  Serial.println("SMS Selesai Dikirim!");
}

void loop() {
  // put your main code here, to run repeatedly:

}
